{% extends 'dashboard/dashboard_base.html' %}
{% load static %}

{% block title %}Enable Two-Factor Authentication{% endblock %}

{% block content %}
<div style="max-width: 720px; margin: 20px auto;">
  
  <div style="
      background: #ffffff;
      padding: 32px;
      border-radius: 14px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.08);
      text-align: center;
  ">
    
    <h2 style="margin-bottom: 8px;">
      üîê Enable Two-Factor Authentication
    </h2>

    <p style="color: #64748b; margin-bottom: 24px;">
      Scan the QR code using Google Authenticator or Authy
    </p>

    <!-- QR CODE -->
    <div style="
        display: inline-block;
        padding: 16px;
        background: #f8fafc;
        border-radius: 12px;
        margin-bottom: 20px;
    ">
      <img
          src="https://api.qrserver.com/v1/create-qr-code/?size=220x220&data={{ qr_code|urlencode }}"
          alt="QR Code"
          style="width:200px;height:200px;padding:5px;"
        >
    </div>
    <!-- SECURITY NOTICE -->
    <div style="
        background: #f8fafc;
        border: 1px solid #e5e7eb;
        border-radius: 10px;
        padding: 16px;
        margin: 20px 0;
        text-align: left;
        font-size: 0.85rem;
    ">

      <p style="font-weight: 600; color: #0f172a; margin-bottom: 10px;">
        üîí Important Security Notice
      </p>

      <p style="color: #475569; margin-bottom: 12px;">
        This QR code contains a <strong>private security key</strong>.  
        Only scan it using trusted authenticator apps.  
        <strong>Do not share this screen</strong> with anyone.
      </p>

      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
        
        <!-- ALLOWED APPS -->
        <div>
          <p style="font-weight: 600; color: #166534; margin-bottom: 6px;">
            ‚úÖ Supported Apps
          </p>
          <ul style="padding-left: 18px; color: #166534; line-height: 1.6;">
            <li>Google Authenticator</li>
            <li>Microsoft Authenticator</li>
            <li>Authy</li>
            <li>Aegis Authenticator</li>
            <li>1Password / Bitwarden</li>
          </ul>
        </div>

        <!-- NOT ALLOWED -->
        <div>
          <p style="font-weight: 600; color: #991b1b; margin-bottom: 6px;">
            ‚ùå Do NOT Use
          </p>
          <ul style="padding-left: 18px; color: #991b1b; line-height: 1.6;">
            <li>Camera app</li>
            <li>QR scanner apps</li>
            <li>WhatsApp scanner</li>
            <li>Paytm / GPay scanner</li>
            <li>Any screenshot sharing</li>
          </ul>
        </div>

      </div>

      <p style="margin-top: 12px; color: #64748b; font-style: italic;">
        If you lose access to your authenticator app, you may be locked out of your account.
      </p>

    </div>


    <!-- FORM -->
    <form method="POST">
      {% csrf_token %}
      
      <input
        type="text"
        name="otp"
        maxlength="6"
        placeholder="Enter 6-digit code"
        required
        style="
          width: 100%;
          padding: 12px 14px;
          font-size: 1rem;
          border-radius: 8px;
          border: 2px solid #e5e7eb;
          margin-bottom: 16px;
          text-align: center;
          letter-spacing: 4px;
        "
      >

      <button type="submit" style="
        width: 100%;
        background: #2563eb;
        color: white;
        border: none;
        padding: 12px;
        font-size: 1rem;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
      ">
        Verify & Enable
      </button>
    </form>

    <p style="margin-top: 18px; font-size: 0.8rem; color: #94a3b8;">
      You‚Äôll need this code every time you log in
    </p>

  </div>

</div>
{% endblock %}
